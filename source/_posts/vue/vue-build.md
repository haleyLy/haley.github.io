---
title: Vue2.0 从零开始--生产部署
date: 2017-01-28 14:13:05
tags: [vue,js]
categories: [前端,vue]
cover: data:image/jpeg;base64,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
---

>简要：继上次搭建vue环境后，开始着手vue的学习;为此向大家分享从开发环境部署到生产环境（线上）中遇到的问题和解决办法，希望能够跟各位VUE大神学习探索，如果有不对或者好的建议告知下；*~*！

-------------------

## 如何打包，部署到生产环境（线上）

```
npm run build
```

**1. dist 文件结构（编译后，生成在vue目录下）**

>- static （存放css/js/image)
- index.html （编译后页面）



**2. 部署生产环境（以Thinkphp为例）**

	（1） 建立子项目，创建控制器建立index方法；实例化模板；将编译后index.html存放在对应的视图下；
	
	（2） 修改vue配置文件（dist下status文件，默认存放在项目的根目录；若无须改变请忽略此步骤！）　　

![(index.html 文件目录)](https://img-blog.csdnimg.cn/img_convert/d3cce7d9612b8235940a4b1567a490ca.png)

![（config文件static存在路径修改，配置文件路径：config\index.js）](https://img-blog.csdnimg.cn/img_convert/f381b620ef97f5957be78b0009006150.png)
	　
## 不加载组件（非根目录）

**原因：路由path错误**　
![（路由配置图）](https://img-blog.csdnimg.cn/img_convert/7700d31297e9651940cb25f68f6f64f2.png)

### 刷新页面（刷新路由）出现404
**1. 为什么**
```
vue路由设置 HTML5 History 模式，直接访问/刷新url会被http server直接解析到该文件路径（被相应的框架接管），但vue的路由是虚拟的（只是告知编译后index.html文件追寻到相应的路径），并不能直接找到这个file，所以会404；
```
**2. 怎么做（针对nignx；具体参考：[HTML5 History 模式](https://router.vuejs.org/zh-cn/essentials/history-mode.html)）**

```
location / {
　 root （index.html存在目录路径，比如：/admin/tpl/index/）
  try_files $uri $uri/ /index.html;
}

单配置此步骤，任意不存在页面（404）都会跳转到上述指定路径；详细解决办法请看下文；
```

## 任意不存在页面（404）都跳转到指定路径（针对解决404页面后）
![这里写图片描述](https://img-blog.csdnimg.cn/img_convert/e9a7df9b8bf1b8646e4e146952f6b07d.png)
**个人解决方法：制作404页面的组件；在routes.js配置，配置增加路由**
```
{ path: '*', component: defaults }
```
---------
