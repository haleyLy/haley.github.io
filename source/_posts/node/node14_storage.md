---
layout: pose
title: nodejs 14 特性 实验性异步本地存储API
date: 2020-12-01 11:10:04
tags: [node,js]
categories: [前端,node]
cover: data:image/jpeg;base64,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
---

> Node.js Async Hooks 模块提供了 API 用来追踪 Node.js 程序中异步资源的声明周期，在最新的 v14.x LTS 版本中新增加了一个 AsyncLocalStorage 类可以方便实现上下文本地存储，在异步调用之间共享数据，对于实现日志链路追踪场景很有用。

下面是一个 HTTP 请求的简单示例，模拟了异步处理，并且在日志输出时去追踪存储的 id。

```vue
const http = require('http');
const { AsyncLocalStorage } = require('async_hooks');
const asyncLocalStorage = new AsyncLocalStorage();
function logWithId(msg) {
    const id = asyncLocalStorage.getStore();
    console.log(`${id !== undefined ? id : '-'}:`, msg);
}
let idSeq = 0;
http.createServer((req, res) => {
asyncLocalStorage.run(idSeq++, () => {
    logWithId('start');
    setImmediate(() => {
    logWithId('processing...');
    setTimeout(() => {
    logWithId('finish');
    res.end();
    }, 2000)
});
});
}).listen(8080);
```

![RUNOOB 图标](https://img-blog.csdnimg.cn/img_convert/eb52f62e37dddeddcbf686d8841675c7.png)

注意：便利性的同时也会牺牲一些性能上的代价。