---
layout: pose
title: Go 学习之路：异常处理defer，panic，recover
date: 2017-11-23 03:19:20
tags: [go,异常处理,defer,painc,recover]
categories: [后端,go]
cover: data:image/jpeg;base64,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
---
## Go没有像Java那样的异常机制，它不能抛出异常。因为设计者们认为，将异常与控制结构混在一起容易使得代码变得混乱。于是乎引入Exception处理: defer,panic,recover;

> 简单描述：Go中可以抛出一个panic的异常，然后在defer中通过recover捕获这个异常，然后正常处理。

例子代码：

```
package main

import "fmt"

func demo(){
	fmt.Println("Welcome, my name is fudomine")
	panic(400)
	fmt.Println("Hello")
}

func main(){
	defer func(){
		fmt.Println("defer start")
		errorMsg := recover()
		fmt.Println("Error msg :", errorMsg)
		fmt.Println("defer end")
	}()
	demo()
}

```
运行结果
![运行结果](https://img-blog.csdn.net/20180629150930893?watermark/2/text/aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzE1NDEzMDA5/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70)

## defer
defer 英文原意： vi. 推迟；延期；服从   vt. 使推迟；使延期。
* Go语言中内置函数；类似于C/PHP的析构函数，但它不是针对对象而是函数；
* 允许在函数中添加多个defer语句。当函数执行到最后时，这些defer语句会按照逆序执行，最后该函数返回（类似堆栈，先进后出）。
* 调用时须在程序结束前调用，简单来说让defer语句在return/panic前写入至内存中;

```
func demo()(str string){
	str = "Hello"
	defer func() {
		str = "Welcome, my  name is fudomine"
	}()
	return
}
```
返回结果：Welcome, my name is fudomine

```
func demo()(str string){
	str = "Hello"
	return
	defer func() {
		str = "Welcome, my  name is fudomine"
	}()
	return
}
```
返回结果：Hello

可能会有小伙伴自己编写代码后，答案不一致；为此特贴出不一样结果的例子代码并进行分析；
```
func demo()(string){
	str := "Hello"

	defer func() {
		str = "Welcome, my  name is fudomine"
	}()
	return str
}
```

原因：defer 中return xxx这一条语句并不是一条原子指令，而上面结果是因为初始化时候就声明输出类型是*T(指针)；
> 拆分为：
> * 返回值 = xxx
* 调用defer函数
* 空的return
详细请参考下[《深入解析GO》](https://tiancaiamao.gitbooks.io/go-internals/content/zh/03.4.html)一文

## panic
panic 英文原意：n. 恐慌，惊慌；大恐慌  adj. 恐慌的；没有理由的  vt. 使恐慌  vi. 十分惊慌
* Go是一个内建函数，可以中断原有的控制流程，进入一个异常的流程中。当函数 Func 调用 panic ，函数Func 的执行被中断，但是 Func  中的延迟函数会正常执行，然后Func 返回到调用它的地方。在调用的地方， Func  的行为就像调用了 panic 。这一过程继续向上(只有刚才defer寸在内存中，将会被调用)，直到发生 panic 的 goroutine 中所有调用的函数返回，此时程序退出。

## recover
recover 英文原意： vt. 恢复；弥补；重新获得   vi. 恢复；胜诉；重新得球   n. 还原至预备姿势
* Go是一个内建的函数，可以让进入令人恐慌的流程中的 goroutine 恢复过来。 recover 仅在延迟函数中有效。在正常的执行过程中，调用 recover 会返回 nil ，并且没有其它任何效果。如果当前的 goroutine 陷入恐慌，调用recover 可以捕获到 panic 的输入值，并且恢复正常的执行。

参考文献
《go web编程》
